package ui;

import java.util.ArrayList;
import java.util.List;

import business.Product;
import business.User;
import util.Console;

public class PrsConsoleApp {

	public static void main(String[] args) {

		int menuOpt = 0;
		System.out.println("Welcome to the PRS Console!");
		
		List<User> users = new ArrayList<>();
		User u1 = new User(1, "ab12345", "pword1", "Amy", "Benson", "513-555-1111", "amy.baker@gmail.com", false, false);
		User u2 = new User(2, "cd67890", "pword2", "Chris", "Daniels", "513-555-2222", "chris.daniels@gmail.com", true, true);
		User u3 = new User(3, "ef12345", "pword3", "Erica", "French", "513-555-333", "erica.french@mail.com", false, true);

		users.add(u1);
		users.add(u2);
		users.add(u3);
				
		while (menuOpt != 6) {
			displayMenu();
			menuOpt = Console.getInt("\nCommand: ", 0, 7);
			int userIndex = 0;
			
			switch (menuOpt) { // in case user enters caps
			case 1:		// list users
				listUsers(users);
				break;

			case 2:  	// get a user
				if (users.size() == 0) {
					System.out.println("No users available.");
				} else {
					userIndex = getUserId(users);
					if (userIndex != -1) {
						System.out.println(users.get(userIndex));
					}
				}
				break;

			case 3:		// add a user
//				
				break;

			case 4:		// edit a user
//				if (items.size() == 0) {
//					System.out.println("No items to drop");
//				} else {
//					itemNumber = Console.getInt("Number: ", 0, (items.size() + 1));
//					String str1 = items.remove(itemNumber - 1);
//					System.out.println(str1 + " was dropped.");
//				}
				break;
				
			case 5:		// delete a user
				if (users.size() == 0) {
					System.out.println("No users available.");
				} else {
					userIndex = getUserId(users);
					if (userIndex != -1) {
						String userId = users.get(userIndex).getUserName();
						boolean success = users.remove(users.get(userIndex));
						if (success) {
							System.out.println("User " + userId + " deleted successfully");
						}
					}
				}	
				break;
			
			case 6:
				break;
				
			default:
				System.out.println("Invalid selection; try again ");
				break;
			}
		}

		System.out.println("Bye!");
			
	}
	
	public static void displayMenu() {

		System.out.println("\nCOMMAND MENU");
		System.out.println(  "------------");
		System.out.println("1 - List Users");
		System.out.println("2 - Get a User");
		System.out.println("3 - Add a User");
		System.out.println("4 - Edit a User");
		System.out.println("5 - Delete a User");
		System.out.println("6 - Exit");
	}
	
	public static void listUsers(List<User> users) {
		System.out.println("\nUser Name  Name                 Phone        Email Address");
		System.out.println(  "---------- -------------------- ------------ " +
		    "-------------------");
		for (int i = 0; i < users.size(); i++) {
			System.out.println(users.get(i));
		}
	}
	
	public static int getUserId(List<User> users) {
		boolean userFound = false;
		int index = 0;
		String s = Console.getString("User Name: ");
		for (int i = 0; i < users.size(); i++) {
			if (users.get(i).getUserName().equalsIgnoreCase(s) ) {
	
				userFound = true;
				index = i;
			}
		}
		if (! userFound) {
			System.out.println("User not found");
			index = -1;
		}
		return index;
	}	
}
